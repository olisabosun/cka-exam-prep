# Exploring Cluster, Containers vs Pods

## Kubectl Autocomplete Setup

### For Bash
To set up autocomplete in bash into the current shell (bash-completion package should be installed first):
```bash
source <(kubectl completion bash)
```

To add autocomplete permanently to your bash shell:
```bash
echo "source <(kubectl completion bash)" >> ~/.bashrc
```

You can also use a shorthand alias for kubectl that works with completion:
```bash
alias k=kubectl
complete -o default -F __start_kubectl k
```

## Kubelet Configuration for Node IP

Edit the kubelet configuration file:
```bash
sudo vim /var/lib/kubelet/kubeadm-flags.env
```

Add the host IP configured for VMs for manager and worker nodes:
```
KUBELET_KUBEADM_ARGS="--node-ip=10.0.0.100 --container-runtime-endpoint=unix:///var/run/crio/crio.sock --pod-infra-container-image=registry.k8s.io/pause:3.10"
```

Reload and restart kubelet:
```bash
sudo systemctl daemon-reload
sudo systemctl restart kubelet
```

## Checking Node Information

Verify that host IPs are in the 10.0.0 range configured for secure cluster communication.

Get node information:
```bash
kubectl get nodes -o wide
```

Describe a node (example for manager node):
```bash
kubectl describe node manager
```

### Node Description Output

**Labels:**
- `beta.kubernetes.io/arch=arm64`
- `beta.kubernetes.io/os=linux`
- `kubernetes.io/arch=arm64`
- `kubernetes.io/hostname=manager`
- `kubernetes.io/os=linux`
- `node-role.kubernetes.io/control-plane=`
- `node.kubernetes.io/exclude-from-external-load-balancers=`

**Annotations:**
- `kubeadm.alpha.kubernetes.io/cri-socket: unix:///var/run/crio/crio.sock`
- `node.alpha.kubernetes.io/ttl: 0`
- `projectcalico.org/IPv4Address: 192.168.49.137/24`
- `projectcalico.org/IPv4IPIPTunnelAddr: 172.17.102.64`
- `volumes.kubernetes.io/controller-managed-attach-detach: true`

## Node Resources

- **Capacity:** The total compute available on the machine.
- **Allocatable:** The compute given to Kubernetes.

## Labels and Annotations

- **Labels:** Key-value pairs used by Kubernetes to sort resources and take actions.
- **Annotations:** For humans, not indexed in etcd.

## Containers vs Pods

- **Container Image > Docker > Container + IP**
- **Kubernetes > Pod (Container)**
